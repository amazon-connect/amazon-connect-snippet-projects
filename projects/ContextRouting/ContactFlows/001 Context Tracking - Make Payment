{"modules":[{"id":"aee2c106-6536-45c7-8715-acddf068dfda","type":"SetAttributes","branches":[{"condition":"Success","transition":"191b76a7-ecd8-4186-b770-f94a7f5f8ba1"},{"condition":"Error","transition":"191b76a7-ecd8-4186-b770-f94a7f5f8ba1"}],"parameters":[{"name":"Attribute","value":"account_number","key":"last_completed_step","namespace":null},{"name":"Attribute","value":"Stored customer input","key":"account_number","namespace":"System"}],"metadata":{"position":{"x":1921.507050014432,"y":947.6460836172951}}},{"id":"191b76a7-ecd8-4186-b770-f94a7f5f8ba1","type":"StoreUserInput","branches":[{"condition":"Success","transition":"d79afd99-aae9-4cb3-a692-c8949170d61a"},{"condition":"Error","transition":"d79afd99-aae9-4cb3-a692-c8949170d61a"}],"parameters":[{"name":"Text","value":"Please enter the 9 digit routing number"},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":9},{"name":"EncryptEntry","value":"false"},{"name":"DisableCancel","value":"false"}],"metadata":{"position":{"x":2406.507050014432,"y":948.6460836172951},"useDynamic":false,"useDynamicForEncryptionKeys":true,"useDynamicForTerminatorDigits":false,"countryCodePrefix":"+1"}},{"id":"53a0829a-a96a-4ba3-b0d4-9c394a4d5d52","type":"SetAttributes","branches":[{"condition":"Success","transition":"7c1ff3fb-2714-407a-b6c1-0195c1a35e1d"},{"condition":"Error","transition":"7c1ff3fb-2714-407a-b6c1-0195c1a35e1d"}],"parameters":[{"name":"Attribute","value":"account_number","key":"last_completed_step","namespace":null},{"name":"Attribute","value":"Stored customer input","key":"account_number","namespace":"System"}],"metadata":{"position":{"x":1923.507050014432,"y":688.6460836172951}}},{"id":"075485e4-fe9b-40ae-8c2c-a00accbcc227","type":"PlayPrompt","branches":[{"condition":"Success","transition":"e3014292-32dd-4e82-9da8-cb9398a280f5"}],"parameters":[{"name":"Text","value":"Transferring to a representative.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1079.2666625976562,"y":1295.3666687011719},"useDynamic":false}},{"id":"e3014292-32dd-4e82-9da8-cb9398a280f5","type":"SetQueue","branches":[{"condition":"Success","transition":"123436bb-ef8e-465b-9571-12a2f1f0c3cd"},{"condition":"Error","transition":"123436bb-ef8e-465b-9571-12a2f1f0c3cd"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-west-2:048607906459:instance/d4a4312d-ab93-4cec-8f3c-74a0db1cbb38/queue/759422e1-920e-43dd-8fdc-feb35b19e7f8","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":1379.2666625976562,"y":1298.3666687011719},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-west-2:048607906459:instance/d4a4312d-ab93-4cec-8f3c-74a0db1cbb38/queue/759422e1-920e-43dd-8fdc-feb35b19e7f8","text":"BasicQueue"}}},{"id":"123436bb-ef8e-465b-9571-12a2f1f0c3cd","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"0dd037b2-340d-496e-8b9e-03ec8f8d33c1"},{"condition":"Error","transition":"0dd037b2-340d-496e-8b9e-03ec8f8d33c1"}],"parameters":[],"metadata":{"position":{"x":1696.2666625976562,"y":1302.3666687011719},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"0dd037b2-340d-496e-8b9e-03ec8f8d33c1","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1962.2666625976562,"y":1303.3666687011719}}},{"id":"4d1ae0e5-d631-40c5-a774-00c172cb99ae","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":5437.266662597656,"y":874.3666687011719}}},{"id":"77655288-ba2c-4ba6-9747-d72c22fa94b0","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"ca964ea0-8005-45ab-be90-69328f47e103"},{"condition":"Timeout","transition":"c46be400-751a-4cdd-91b2-954713679631"},{"condition":"NoMatch","transition":"c46be400-751a-4cdd-91b2-954713679631"},{"condition":"Error","transition":"c46be400-751a-4cdd-91b2-954713679631"}],"parameters":[{"name":"Text","value":"Thank you. Your payment has been sent for processing. Press 1 to return to the main menu, otherwise, you can now hang up.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":4520.266662597656,"y":565.3666687011719},"conditionMetadata":[{"id":"0997da92-893f-407f-89e4-d278f8341a97","value":"1"}],"useDynamic":false},"target":"Digits"},{"id":"ced09385-4c35-4a51-b3e3-57399481db59","type":"StoreUserInput","branches":[{"condition":"Success","transition":"aee2c106-6536-45c7-8715-acddf068dfda"},{"condition":"Error","transition":"aee2c106-6536-45c7-8715-acddf068dfda"}],"parameters":[{"name":"Text","value":"Please enter your account number, followed by the pound sign."},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":20},{"name":"EncryptEntry","value":"false"},{"name":"TerminatorDigits","value":"#"},{"name":"DisableCancel","value":"false"}],"metadata":{"position":{"x":1655.2666625976558,"y":936.366668701172},"useDynamic":false,"useDynamicForEncryptionKeys":true,"useDynamicForTerminatorDigits":false,"countryCodePrefix":"+1"}},{"id":"8da5e0b8-234b-4f84-a89e-e27a8cdd9e7e","type":"StoreUserInput","branches":[{"condition":"Success","transition":"53a0829a-a96a-4ba3-b0d4-9c394a4d5d52"},{"condition":"Error","transition":"53a0829a-a96a-4ba3-b0d4-9c394a4d5d52"}],"parameters":[{"name":"Text","value":"Please enter your card number"},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":16},{"name":"EncryptEntry","value":"false"},{"name":"DisableCancel","value":"false"}],"metadata":{"position":{"x":1652.2666625976558,"y":689.3666687011719},"useDynamic":false,"useDynamicForEncryptionKeys":true,"useDynamicForTerminatorDigits":false,"countryCodePrefix":"+1"}},{"id":"7c1ff3fb-2714-407a-b6c1-0195c1a35e1d","type":"StoreUserInput","branches":[{"condition":"Success","transition":"d79afd99-aae9-4cb3-a692-c8949170d61a"},{"condition":"Error","transition":"d79afd99-aae9-4cb3-a692-c8949170d61a"}],"parameters":[{"name":"Text","value":"please enter the four digit expiration date."},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":4},{"name":"EncryptEntry","value":"false"},{"name":"DisableCancel","value":"false"}],"metadata":{"position":{"x":2401.084198451932,"y":685.3687093497169},"useDynamic":false,"useDynamicForEncryptionKeys":true,"useDynamicForTerminatorDigits":false,"countryCodePrefix":"+1"}},{"id":"9058f517-bbc6-4cc6-84c8-1e05e5d9a869","type":"SetAttributes","branches":[{"condition":"Success","transition":"db847c2c-e478-41f2-9165-29afbf38f968"},{"condition":"Error","transition":"db847c2c-e478-41f2-9165-29afbf38f968"}],"parameters":[{"name":"Attribute","value":"payment_source","key":"payment_source","namespace":"External"},{"name":"Attribute","value":"account_number","key":"account_number","namespace":"External"},{"name":"Attribute","value":"account_data","key":"account_data","namespace":"External"},{"name":"Attribute","value":"payment_amount","key":"payment_amount","namespace":"External"},{"name":"Attribute","value":"1","key":"active_task_tracker","namespace":null},{"name":"Attribute","value":"last_completed_step","key":"last_completed_step","namespace":"External"}],"metadata":{"position":{"x":433.72906494140625,"y":30.60171890258789}}},{"id":"012eb335-ec6f-4a2f-a48b-3011537bef55","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"9058f517-bbc6-4cc6-84c8-1e05e5d9a869"},{"condition":"NoMatch","transition":"fda57c5f-e64b-48bd-b9a7-30eeb6c70ab4"}],"parameters":[{"name":"Attribute","value":"active_task_tracker"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":48.96377015889378,"y":226.50576340314097},"conditionMetadata":[{"id":"886a1a24-e96f-4c0c-bcd2-872bb5d9c0cb","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"1"}]}},{"id":"bd383f74-1a43-4b6d-adaf-65034a10798a","type":"SetAttributes","branches":[{"condition":"Success","transition":"8da5e0b8-234b-4f84-a89e-e27a8cdd9e7e"},{"condition":"Error","transition":"8da5e0b8-234b-4f84-a89e-e27a8cdd9e7e"}],"parameters":[{"name":"Attribute","value":"credit card","key":"payment_source","namespace":null},{"name":"Attribute","value":"1","key":"active_task_tracker","namespace":null},{"name":"Attribute","value":"payment_source","key":"last_completed_step","namespace":null},{"name":"Attribute","value":"making a payment","key":"tracking_task_title","namespace":null},{"name":"Attribute","value":"make_payment","key":"active_task","namespace":null}],"metadata":{"position":{"x":1120.6333312988281,"y":689}}},{"id":"03f14a94-6ae7-4251-bb2e-0ae8dd094170","type":"SetAttributes","branches":[{"condition":"Success","transition":"ced09385-4c35-4a51-b3e3-57399481db59"},{"condition":"Error","transition":"ced09385-4c35-4a51-b3e3-57399481db59"}],"parameters":[{"name":"Attribute","value":"bank account","key":"payment_source","namespace":null},{"name":"Attribute","value":"1","key":"active_task_tracker","namespace":null},{"name":"Attribute","value":"payment_source","key":"last_completed_step","namespace":null},{"name":"Attribute","value":"making a payment","key":"tracking_task_title","namespace":null}],"metadata":{"position":{"x":1124.6549824960143,"y":950.6460836172952}}},{"id":"fda57c5f-e64b-48bd-b9a7-30eeb6c70ab4","type":"PlayPrompt","branches":[{"condition":"Success","transition":"ad4a8d21-26c1-41c9-b9b5-93e735b4480b"}],"parameters":[{"name":"Text","value":"Sample payment flow. Your current balance is $85.64.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":135.87834269929812,"y":506.0872537850487},"useDynamic":false}},{"id":"f27a055e-324f-4dce-8ba3-93dcfad85356","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"credit card","transition":"8da5e0b8-234b-4f84-a89e-e27a8cdd9e7e"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"bank account","transition":"ced09385-4c35-4a51-b3e3-57399481db59"},{"condition":"NoMatch","transition":"ad4a8d21-26c1-41c9-b9b5-93e735b4480b"}],"parameters":[{"name":"Attribute","value":"payment_source"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":1358.2666625976562,"y":494.3666687011719},"conditionMetadata":[{"id":"d9a09d5b-d826-43cb-9852-a32a3a2e9a90","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"credit card"},{"id":"e47db7bb-54a0-4ef8-a615-093e4158c0dc","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"bank account"}]}},{"id":"03dcb61b-e349-45cc-ba48-f21b1107d7e4","type":"Loop","branches":[{"condition":"Looping","transition":"ad4a8d21-26c1-41c9-b9b5-93e735b4480b"},{"condition":"Complete","transition":"075485e4-fe9b-40ae-8c2c-a00accbcc227"}],"parameters":[{"name":"LoopCount","value":"3"}],"metadata":{"position":{"x":872.2666625976562,"y":926.3666687011719},"useDynamic":false}},{"id":"ad4a8d21-26c1-41c9-b9b5-93e735b4480b","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"bd383f74-1a43-4b6d-adaf-65034a10798a"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"2","transition":"03f14a94-6ae7-4251-bb2e-0ae8dd094170"},{"condition":"Timeout","transition":"03dcb61b-e349-45cc-ba48-f21b1107d7e4"},{"condition":"NoMatch","transition":"03dcb61b-e349-45cc-ba48-f21b1107d7e4"},{"condition":"Error","transition":"03dcb61b-e349-45cc-ba48-f21b1107d7e4"}],"parameters":[{"name":"Text","value":"If you'd like to make a payment by credit card, press 1. If you'd like to pay by bank transfer, press 2.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":638.2666625976562,"y":690.3666687011719},"conditionMetadata":[{"id":"226c1488-9323-45ea-a7fb-345dd45bc5c1","value":"1"},{"id":"b6d5409d-cd56-4890-874a-df980176dbca","value":"2"}],"useDynamic":false},"target":"Digits"},{"id":"d79afd99-aae9-4cb3-a692-c8949170d61a","type":"SetAttributes","branches":[{"condition":"Success","transition":"4c99ea90-985a-44fc-985d-ec4610e3ff09"},{"condition":"Error","transition":"4c99ea90-985a-44fc-985d-ec4610e3ff09"}],"parameters":[{"name":"Attribute","value":"account_data","key":"last_completed_step","namespace":null},{"name":"Attribute","value":"Stored customer input","key":"account_data","namespace":"System"}],"metadata":{"position":{"x":2693.507050014432,"y":875.6460836172951}}},{"id":"4c99ea90-985a-44fc-985d-ec4610e3ff09","type":"StoreUserInput","branches":[{"condition":"Success","transition":"97c572d4-b329-401b-be6e-2b9cc95159a7"},{"condition":"Error","transition":"97c572d4-b329-401b-be6e-2b9cc95159a7"}],"parameters":[{"name":"Text","value":"Please enter the amount that you would like to payin whole dollars, then press # to complete your entry. For example. $25.00 would be entered as 2 5  pound."},{"name":"TextToSpeechType","value":"text"},{"name":"CustomerInputType","value":"Custom"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":20},{"name":"EncryptEntry","value":"false"},{"name":"TerminatorDigits","value":"#"},{"name":"DisableCancel","value":"false"}],"metadata":{"position":{"x":3147.814911342557,"y":881.2324483633888},"useDynamic":false,"useDynamicForEncryptionKeys":true,"useDynamicForTerminatorDigits":false,"countryCodePrefix":"+1"}},{"id":"443912c8-828e-4830-94ff-327403ae2110","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"77655288-ba2c-4ba6-9747-d72c22fa94b0"},{"condition":"Error","transition":"77655288-ba2c-4ba6-9747-d72c22fa94b0"}],"parameters":[{"name":"FunctionArn","value":"payment_lambda_function","namespace":"User Defined"},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":4122.266662597656,"y":624.3666687011719},"dynamicMetadata":{},"useDynamic":true},"target":"Lambda"},{"id":"97c572d4-b329-401b-be6e-2b9cc95159a7","type":"SetAttributes","branches":[{"condition":"Success","transition":"d0678921-4b6c-4d02-9391-057dbe623927"},{"condition":"Error","transition":"d0678921-4b6c-4d02-9391-057dbe623927"}],"parameters":[{"name":"Attribute","value":"payment_amount","key":"last_completed_step","namespace":null},{"name":"Attribute","value":"Stored customer input","key":"payment_amount","namespace":"System"}],"metadata":{"position":{"x":3424.122528530057,"y":882.9812276602638}}},{"id":"db847c2c-e478-41f2-9165-29afbf38f968","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"payment_amount","transition":"d0678921-4b6c-4d02-9391-057dbe623927"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"account_data","transition":"4c99ea90-985a-44fc-985d-ec4610e3ff09"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"account_number","transition":"7c1ff3fb-2714-407a-b6c1-0195c1a35e1d"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"payment_source","transition":"f27a055e-324f-4dce-8ba3-93dcfad85356"},{"condition":"NoMatch","transition":"ad4a8d21-26c1-41c9-b9b5-93e735b4480b"}],"parameters":[{"name":"Attribute","value":"last_completed_step"},{"name":"Namespace","value":"User Defined"}],"metadata":{"position":{"x":717.3072509765625,"y":28.59052276611328},"conditionMetadata":[{"id":"f1cc385a-e9d4-4e4a-aa1c-033fdb38f51d","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"payment_amount"},{"id":"79f92af9-49ba-4640-bca7-b0d519483feb","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"account_data"},{"id":"25b71422-6923-414e-815b-44d6eea2aaef","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"account_number"},{"id":"c9fa20bd-a959-4650-8ab7-97a7085ad546","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"payment_source"}]}},{"id":"d0678921-4b6c-4d02-9391-057dbe623927","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"443912c8-828e-4830-94ff-327403ae2110"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"3","transition":"ca964ea0-8005-45ab-be90-69328f47e103"},{"condition":"Timeout","transition":"ca964ea0-8005-45ab-be90-69328f47e103"},{"condition":"NoMatch","transition":"ca964ea0-8005-45ab-be90-69328f47e103"},{"condition":"Error","transition":"ca964ea0-8005-45ab-be90-69328f47e103"}],"parameters":[{"name":"Text","value":"To confirm, you would like to pay $.Attributes.payment_amount dollars from your $.Attributes.payment_source. Press 1 to confirm or press 3 to cancel and return to the main menu.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"Timeout","value":"5"},{"name":"MaxDigits","value":"1"}],"metadata":{"position":{"x":3853.2666625976562,"y":867.3666687011719},"conditionMetadata":[{"id":"fa9c4b9f-afd4-4a0a-97c5-d5ecafeb196f","value":"1"},{"id":"16574519-7598-43ea-bf00-89a3e97b49af","value":"3"}],"useDynamic":false},"target":"Digits"},{"id":"c46be400-751a-4cdd-91b2-954713679631","type":"PlayPrompt","branches":[{"condition":"Success","transition":"4d1ae0e5-d631-40c5-a774-00c172cb99ae"}],"parameters":[{"name":"Text","value":"Goodbye.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":5193.266662597656,"y":843.3666687011719},"useDynamic":false}},{"id":"ca964ea0-8005-45ab-be90-69328f47e103","type":"SetAttributes","branches":[{"condition":"Success","transition":"8340187a-5509-4088-9c13-84aa7ec6ee6d"},{"condition":"Error","transition":"8340187a-5509-4088-9c13-84aa7ec6ee6d"}],"parameters":[{"name":"Attribute","value":"1","key":"return_to_main","namespace":null}],"metadata":{"position":{"x":4525.266662597656,"y":998.3666687011719}}},{"id":"8340187a-5509-4088-9c13-84aa7ec6ee6d","type":"Transfer","branches":[{"condition":"Error","transition":"c46be400-751a-4cdd-91b2-954713679631"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:us-west-2:048607906459:instance/d4a4312d-ab93-4cec-8f3c-74a0db1cbb38/contact-flow/7fbc7649-811a-40fe-914f-989ef70a6bd9","resourceName":"001 Context Tracking - Main"}],"metadata":{"position":{"x":4782.268127441406,"y":991.2581481933594},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:us-west-2:048607906459:instance/d4a4312d-ab93-4cec-8f3c-74a0db1cbb38/contact-flow/7fbc7649-811a-40fe-914f-989ef70a6bd9","text":"001 Context Tracking - Main","arn":null,"metricDetail":null,"resourceId":null}},"target":"Flow"}],"version":"1","type":"contactFlow","start":"012eb335-ec6f-4a2f-a48b-3011537bef55","metadata":{"entryPointPosition":{"x":46.96377015889378,"y":15.505763403140985},"snapToGrid":false,"name":"001 Context Tracking - Make Payment","description":null,"type":"contactFlow","status":"published","hash":"e051c55ee6358e81362cd1256676bb33b90feee1b23c51f5db85f7cba2eb5c00"}}